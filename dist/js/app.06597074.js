webpackJsonp([1],{0:function(t,e,i){t.exports=i("NHnr")},"6UIl":function(t,e){t.exports={"todo-items":"TodoItems_todo-items__2EC0c"}},"6siT":function(t,e){},JPXV:function(t,e){t.exports={"todo-item":"TodoItem_todo-item__3QhRt","first-row":"TodoItem_first-row__2q5pv",expand:"TodoItem_expand__3cudJ",info:"TodoItem_info__3Keq2",icon:"TodoItem_icon__25LOF",delete:"TodoItem_delete__2wspz TodoItem_icon__25LOF",edit:"TodoItem_edit__uM47O TodoItem_icon__25LOF",splitter:"TodoItem_splitter__2BdrN",palette:"TodoItem_palette__3KyVl","palette-splitter":"TodoItem_palette-splitter__JF5k_","priority-split":"TodoItem_priority-split__1DClI","priority-text":"TodoItem_priority-text__2NLr1",ltrForm:"TodoItem_ltrForm__1E14-",rtlForm:"TodoItem_rtlForm__1tEdH"}},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("/5sW"),n=(i("6siT"),i("Pi1K"),i("w1QW"),i("XK0h"),i("EuXz"),i("WpTh"),new o["a"]),r=window,s=r.R,l={name:"Header",props:{title:String},data:function(){return{searchTextboxShowCondition:!1,filterPossibilitiesShowCondition:!1,whichTodosAreShown:"All",query:"",filters:["All","Done","Undone"]}},methods:{closeSearchBox:function(){this.query="",this.toggleSearchTextboxShowCondition(),this.sendFilterSettings()},toggleSearchTextboxShowCondition:function(){this.searchTextboxShowCondition=!this.searchTextboxShowCondition,!0===this.searchTextboxShowCondition&&(this.filterPossibilitiesShowCondition=!1)},toggleFilterPossibilitiesShowCondition:function(){this.whichTodosAreShown="All",this.filterPossibilitiesShowCondition=!this.filterPossibilitiesShowCondition,!0===this.filterPossibilitiesShowCondition&&(this.searchTextboxShowCondition=!1)},switchFilterTo:function(t){this.whichTodosAreShown=t,this.filterPossibilitiesShowCondition=!1,this.sendFilterSettings()},sendFilterSettings:function(){n.$emit("APPLY_SETTING",s.pick(["query","whichTodosAreShown"],this))}}},c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.$style["root"]},[i("transition",{attrs:{name:"number-fade"}},[t.searchTextboxShowCondition?t._e():i("span",{class:t.$style["title"]},[t._v("\n      "+t._s(t.title)+"\n    ")])]),i("transition",{attrs:{name:"number-fade"}},[t.searchTextboxShowCondition?i("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],class:t.$style["search-input"],attrs:{type:"textbox",placeholder:"Search here"},domProps:{value:t.query},on:{input:[function(e){e.target.composing||(t.query=e.target.value)},t.sendFilterSettings]}}):t._e()]),i("div",{class:t.$style["all-filters"]},[i("transition",{attrs:{name:"number-fade"}},[t.filterPossibilitiesShowCondition?t._e():i("a",{class:t.$style["filter-icon"],on:{click:t.toggleFilterPossibilitiesShowCondition}},[t._v("\n          "+t._s(t.whichTodosAreShown)+"\n        ")])]),t.filterPossibilitiesShowCondition?t._l(t.filters,function(e,o){return i("div",{key:o},[i("transition",{attrs:{name:"number-fade"}},[i("a",{class:t.$style["filter-icon"],on:{click:function(i){t.switchFilterTo(e)}}},[t._v("\n              "+t._s(e)+"\n            ")])])],1)}):t._e(),t.searchTextboxShowCondition?t._e():i("i",{class:t.$style["search-icon"],on:{click:t.toggleSearchTextboxShowCondition}},[t._v("\n        search\n      ")]),t.searchTextboxShowCondition?i("i",{class:t.$style["search-icon"],on:{click:t.closeSearchBox}},[t._v("\n        close\n      ")]):t._e()],2)],1)},d=[],a=i("XyMi");function u(t){this["$style"]=i("oUnx")}var h=!1,_=u,p=null,f=null,m=Object(a["a"])(l,c,d,h,_,p,f),y=m.exports,x=window,T=x.R,v={name:"TodoInput",props:{edit:Object},data:function(){return{title:"",editId:"",editTitle:""}},watch:{edit:function(t){if(!t)return null;this.editId=t.id,this.editTitle=t.title}},computed:{value:function(){return this.editId?this.editTitle:this.title},valueExist:function(){return this.editId&&this.editTitle||!this.editId&&this.title},directionType:function(){return this.editId&&this.editTitle?this.editTitle.charCodeAt(0)>256?"rtl":"ltr":!this.editId&&this.title?this.title.charCodeAt(0)>256?"rtl":"ltr":void 0}},methods:{onChange:function(t){var e=t.target.value;this.editId?this.editTitle=e:this.title=e},onClick:function(){if(!this.valueExist)return null;this.editId?this.onEdit():this.onAdd()},onAdd:function(){""!=this.title.trim()&&(this.$emit("add",T.trim(this.title)),this.title="")},onEdit:function(){""!==this.editTitle.trim()&&(this.$emit("edit",{id:this.editId,title:this.editTitle.trim()}),this.editTitle="",this.editId="")}}},w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.$style["input-root"]},[i("textarea",{class:t.$style["input"],style:{direction:t.directionType},attrs:{type:"text",placeholder:"Add a todo"},domProps:{value:t.value},on:{input:t.onChange,keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.onClick(e):null}}}),i("transition",{attrs:{name:"fade"}},[i("i",{directives:[{name:"show",rawName:"v-show",value:t.valueExist,expression:"valueExist"}],class:t.$style["plus-sign"],on:{click:t.onClick}},[t._v("\n      "+t._s(t.editId?"edit":"add")+"\n    ")])])],1)},k=[];function I(t){this["$style"]=i("dLSf")}var b=!1,S=I,$=null,g=null,C=Object(a["a"])(v,w,k,b,S,$,g),E=C.exports,P=(i("qwQ3"),i("mJx5"),{name:"Checkbox",props:["value","itemIndex"],methods:{click:function(){this.$emit("click",!this.value)}}}),F=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:[t.value?t.$style.checked:t.$style.checkbox,"noselect"],on:{click:t.click}},[i("transition",{attrs:{name:"number-fade"}},[i("div",{class:[t.itemIndex+1<10?t.$style.itemIndexSingleDigit:t.itemIndex+1<100?t.$style.itemIndexDoubleDigit:t.$style.itemIndexTripleDigit,"noselect"]},[t._v("\n      "+t._s(t.itemIndex+1)+"\n    ")])])],1)},A=[];function D(t){this["$style"]=i("s++6")}var q=!1,N=D,H=null,O=null,j=Object(a["a"])(P,F,A,q,N,H,O),L=j.exports,K={name:"PriorityPicker",props:{priority:Number,color:String}},R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.$style.picker,style:{background:t.color},on:{click:function(e){t.$emit("picked",t.priority)}}},[t.$parent.priority===t.priority?i("i",{class:t.$style["pick-icon"]},[t._v("done")]):t._e()])},J=[];function U(t){this["$style"]=i("q4Ng")}var W=!1,M=U,X=null,Q=null,Y=Object(a["a"])(K,R,J,W,M,X,Q),z=Y.exports,B={name:"TodoItem",components:{Checkbox:L,PriorityPicker:z},data:function(){return{expanded:!1,priorityColors:["#e2e2e2","#588c7e","#f2e394","#d96459"]}},props:{title:String,functor:String,creator:String,id:Number,itemIndex:Number,priority:Number,onDone:Function,onDelete:Function,onEdit:Function,onEditPriority:Function},methods:{checkboxClicked:function(t){this.onDone(this.id,t),this.expanded=!0},expand:function(){this.expanded=!this.expanded},editPriority:function(t){this.onEditPriority({id:this.id,priority:t})}},computed:{selectedClassForDirection:function(){return this.title.charCodeAt(0)>256?"rtlForm":"ltrForm"},titleList:function(){return this.title.split("\n")}}},G=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{class:t.$style["todo-item"],style:{"border-color":t.priorityColors[t.priority]},on:{click:function(e){return e.target!==e.currentTarget?null:t.expand(e)}}},[i("div",{class:t.$style["first-row"],on:{click:function(e){return e.target!==e.currentTarget?null:t.expand(e)}}},[i("Checkbox",{attrs:{value:!!t.functor,itemIndex:t.itemIndex},on:{click:t.checkboxClicked}}),i("div",{class:t.$style[t.selectedClassForDirection],on:{click:function(e){return e.target!==e.currentTarget?null:t.expand(e)}}},t._l(t.titleList,function(e,o){return i("p",{key:o,on:{click:function(e){return e.target!==e.currentTarget?null:t.expand(e)}}},[t._v("\n      "+t._s(e)+"\n    ")])}))],1),i("transition",{attrs:{name:"fade"}},[t.expanded?i("div",{on:{click:function(e){return e.target!==e.currentTarget?null:t.expand(e)}}},[i("div",{class:t.$style.expand},[i("span",{class:t.$style.info,on:{click:function(e){return e.target!==e.currentTarget?null:t.expand(e)}}},[t._v(t._s(t.creator&&"Created by "+t.creator)),""!==t.functor?i("div",{class:t.$style.splitter}):t._e(),t._v(t._s(t.functor&&"Done by "+t.functor))]),i("i",{class:t.$style.delete,on:{click:function(e){t.onDelete(t.id)}}},[t._v("close")]),i("i",{class:t.$style.edit,on:{click:function(e){t.onEdit(t.id)}}},[t._v("edit")])]),i("div",{class:t.$style["priority-box"]},[i("div",{class:t.$style["priority-split"]},[i("div",{class:t.$style["palette-splitter"]}),i("p",{class:t.$style["priority-text"]},[t._v(" PRIORITY ")]),i("div",{class:t.$style["palette-splitter"]})]),i("div",{class:t.$style.palette},t._l(t.priorityColors,function(e,o){return i("PriorityPicker",{key:o,attrs:{priority:o,color:e},on:{picked:function(e){t.editPriority(e)}}})}))])]):t._e()])],1)},V=[];function Z(t){this["$style"]=i("JPXV")}var tt=!1,et=Z,it=null,ot=null,nt=Object(a["a"])(B,G,V,tt,et,it,ot),rt=nt.exports,st=window,lt=st.R,ct={name:"TodoItems",components:{TodoItem:rt},data:function(){return{query:"",whichTodosAreShown:"All",time:"descending"}},props:{todos:Array,onDone:Function,onDelete:Function,onEdit:Function,onEditPriority:Function},mounted:function(){var t=this;n.$on("APPLY_SETTING",function(e){t.query=e.query.toLowerCase(),t.whichTodosAreShown=e.whichTodosAreShown})},computed:{computedTodos:function(){return lt.compose(lt.filter(this.searchTitle),lt.filter(this.doneFilter))(this.todos)}},methods:{searchTitle:function(t){var e=t.title;if(!this.query.length)return!0;var i=e.toLowerCase().search(this.query);return!(i<0)},doneFilter:function(t){var e=t.functor;return"All"===this.whichTodosAreShown||("Done"===this.whichTodosAreShown?e:"Undone"===this.whichTodosAreShown?!e:void 0)}}},dt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition-group",{class:t.$style["todo-items"],attrs:{tag:"ul",name:"list"}},t._l(t.computedTodos,function(e,o){return i("TodoItem",t._b({key:e.id,attrs:{itemIndex:o,onDone:t.onDone,onDelete:t.onDelete,onEdit:t.onEdit,onEditPriority:t.onEditPriority}},"TodoItem",e,!1))}))},at=[];function ut(t){this["$style"]=i("6UIl")}var ht=!1,_t=ut,pt=null,ft=null,mt=Object(a["a"])(ct,dt,at,ht,_t,pt,ft),yt=mt.exports,xt=window,Tt=xt.W,vt=function(){return Math.floor(1e15*Math.random())},wt=function(t){return Tt.share.dispatch([],t,[])},kt=function(t,e){return wt(["__append",[{id:vt(),title:t,functor:"",creator:e,priority:0}]])},It=function(t,e){return wt(["__map",[["__ifElse",[["__propEq",["id",t]],["__assoc",["title",e]],["__identity",[]]]]]])},bt=function(t,e){return wt(["__map",[["__ifElse",[["__propEq",["id",t]],["__assoc",["priority",e]],["__identity",[]]]]]])},St=function(t,e){return wt(["__map",[["__ifElse",[["__propEq",["id",t]],["__assoc",["functor",e]],["__identity",[]]]]]])},$t=function(t){return wt(["__reject",[["__propEq",["id",t]]]])},gt=window,Ct=gt.W,Et=function(t){Ct.loadData().then(function(e){var i=e.user.name;t.name=i}),Ct.share.getFromServer([]).then(function(){return Ct.start()}),Ct.share.subscribe(function(e){t.todos=e||[]})},Pt=window,Ft=Pt.W,At=Pt.R,Dt={name:"App",components:{Header:y,TodoInput:E,TodoItems:yt},data:function(){return{title:"Todolite",name:"",todos:[],editId:""}},created:function(){Ft&&Et(this)},computed:{edit:function(){return At.find(At.propEq("id",this.editId),this.todos)}},methods:{onClickEdit:function(t){this.editId=t},onAdd:function(t){kt(t,this.name)},onEditTitle:function(t){It(t.id,t.title),this.editId=""},onEditPriority:function(t){bt(t.id,t.priority)},onDone:function(t,e){St(t,e?this.name:"")},onDelete:function(t){$t(t)}}},qt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.$style.root},[i("Header",{attrs:{title:t.title}}),i("TodoItems",{attrs:{todos:t.todos,onDone:t.onDone,onDelete:t.onDelete,onEdit:t.onClickEdit,onEditPriority:t.onEditPriority}}),i("TodoInput",{attrs:{edit:t.edit},on:{add:t.onAdd,edit:t.onEditTitle}})],1)},Nt=[];function Ht(t){this["$style"]=i("fSpt")}var Ot=!1,jt=Ht,Lt=null,Kt=null,Rt=Object(a["a"])(Dt,qt,Nt,Ot,jt,Lt,Kt),Jt=Rt.exports;o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(Jt)}}).$mount("#app")},Pi1K:function(t,e){},XK0h:function(t,e){},dLSf:function(t,e){t.exports={"input-root":"TodoInput_input-root__3wRFE",input:"TodoInput_input__28qMj","plus-sign":"TodoInput_plus-sign__wI129"}},fSpt:function(t,e){t.exports={root:"App_root__2SJlR"}},oUnx:function(t,e){t.exports={root:"Header_root__k8v1j",title:"Header_title__xw9kv","search-icon":"Header_search-icon__29UG0","filter-icon":"Header_filter-icon__3z2vi","search-input":"Header_search-input__1IpPp","all-filters":"Header_all-filters__kNgaP"}},q4Ng:function(t,e){t.exports={picker:"PriorityPicker_picker__1aCHH","pick-icon":"PriorityPicker_pick-icon__1j2Yc"}},"s++6":function(t,e){t.exports={checkbox:"Checkbox_checkbox__7A8qm",checked:"Checkbox_checked__3oaPo Checkbox_checkbox__7A8qm"}},w1QW:function(t,e){}},[0]);
//# sourceMappingURL=app.06597074.js.map