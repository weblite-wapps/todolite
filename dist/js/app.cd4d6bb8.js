webpackJsonp([1],{0:function(e,t,n){e.exports=n("NHnr")},"6UIl":function(e,t){e.exports={"todo-items":"TodoItems_todo-items__2EC0c"}},"6siT":function(e,t){},JPXV:function(e,t){e.exports={"todo-item":"TodoItem_todo-item__3QhRt","first-row":"TodoItem_first-row__2q5pv","todo-item-title":"TodoItem_todo-item-title__m9o4j",expand:"TodoItem_expand__3cudJ",functor:"TodoItem_functor__2scCT",icon:"TodoItem_icon__25LOF",delete:"TodoItem_delete__2wspz TodoItem_icon__25LOF",edit:"TodoItem_edit__uM47O TodoItem_icon__25LOF"}},MxOl:function(e,t){e.exports={root:"Setting_root__t5O6k",panel:"Setting_panel__3gTXx",search:"Setting_search__3Ta86","radio-title":"Setting_radio-title__10-bL","radio-root":"Setting_radio-root__1ApXB",apply:"Setting_apply__2Q8iH"}},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("/5sW"),i=(n("6siT"),n("Pi1K"),n("w1QW"),n("XK0h"),n("EuXz"),n("WpTh"),new o["a"]),s={name:"Header",props:["title"],methods:{openSetting:function(){i.$emit("OPEN_SETTING")}}},d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style["root"]},[n("span",{class:e.$style["title"]},[e._v(e._s(e.title))]),n("i",{class:e.$style["filter-icon"],on:{click:e.openSetting}},[e._v("filter_list")])])},r=[],a=n("XyMi");function l(e){this["$style"]=n("oUnx")}var c=!1,u=l,_=null,p=null,m=Object(a["a"])(s,d,r,c,u,_,p),f=m.exports,h={name:"TodoInput",props:["edit"],data:function(){return{title:"",editId:"",editTitle:""}},watch:{edit:function(e){if(!e)return null;this.editId=e.id,this.editTitle=e.title}},computed:{value:function(){return this.editId?this.editTitle:this.title},valueExist:function(){return this.editId&&this.editTitle||!this.editId&&this.title}},methods:{onChange:function(e){var t=e.target.value;this.editId?this.editTitle=t:this.title=t},onClick:function(){if(!this.valueExist)return null;this.editId?this.onEdit():this.onAdd()},onAdd:function(){this.$emit("add",this.title),this.title=""},onEdit:function(){var e=this;this.$emit("edit",{id:this.editId,title:this.editTitle}),this.editTitle="",setTimeout(function(){e.editId=""},900)}}},v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style["input-root"]},[n("input",{class:e.$style.input,attrs:{type:"text",placeholder:"add todo ..."},domProps:{value:e.value},on:{input:e.onChange,keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.onClick(t):null}}}),n("transition",{attrs:{name:"fade"}},[n("i",{directives:[{name:"show",rawName:"v-show",value:e.valueExist,expression:"valueExist"}],on:{click:e.onClick}},[e._v(e._s(e.editId?"edit":"add"))])])],1)},y=[];function x(e){this["$style"]=n("dLSf")}var T=!1,$=x,g=null,k=null,I=Object(a["a"])(h,v,y,T,$,g,k),w=I.exports,E=(n("qwQ3"),{name:"Checkbox",props:["value"],methods:{click:function(){this.$emit("click",!this.value)}}}),b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:[e.value?e.$style.checked:e.$style.checkbox,"noselect"],on:{click:e.click}},[n("i",{directives:[{name:"show",rawName:"v-show",value:!e.value,expression:"!value"}]},[e._v("no")]),n("transition",{attrs:{name:"fade"}},[n("i",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}]},[e._v("check")])])],1)},q=[];function S(e){this["$style"]=n("s++6")}var O=!1,P=S,D=null,C=null,N=Object(a["a"])(E,b,q,O,P,D,C),j=N.exports,A={name:"TodoItem",components:{Checkbox:j},data:function(){return{expanded:!1}},props:["title","functor","id","onDone","onDelete","onEdit"],methods:{expande:function(){this.expanded=!this.expanded}}},H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{class:e.$style["todo-item"]},[n("div",{class:e.$style["first-row"]},[n("Checkbox",{attrs:{value:!!e.functor},on:{click:function(t){return e.onDone(e.id,t)}}}),n("div",{class:e.$style["todo-item-title"]},[e._v(e._s(e.title))]),n("i",{staticClass:"noselect",on:{click:e.expande}},[e._v(e._s(e.expanded?"expand_less":"expand_more"))])],1),n("transition",{attrs:{name:"bounce"}},[e.expanded?n("div",{class:e.$style.expand},[n("span",{class:e.$style.functor},[e._v(e._s(e.functor&&"Done By "+e.functor))]),n("i",{class:e.$style.delete,on:{click:function(t){e.onDelete(e.id)}}},[e._v("close")]),n("i",{class:e.$style.edit,on:{click:function(t){e.onEdit(e.id)}}},[e._v("edit")])]):e._e()])],1)},L=[];function M(e){this["$style"]=n("JPXV")}var X=!1,F=M,W=null,R=null,J=Object(a["a"])(A,H,L,X,F,W,R),Q=J.exports,G=window,K=G.R,U={name:"TodoItems",components:{TodoItem:Q},data:function(){return{query:"",done:"all",time:"descending"}},props:["todos","onDone","onDelete","onEdit"],mounted:function(){var e=this;i.$on("APPLY_SETTING",function(t){e.query=t.query,e.done=t.done,e.time=t.time})},computed:{computedTodos:function(){return K.compose(this.order,K.filter(this.searchTitle),K.filter(this.doneFilter))(this.todos)}},methods:{searchTitle:function(e){var t=e.title;if(!this.query.length)return!0;var n=t.search(this.query);return!(n<0)},doneFilter:function(e){var t=e.functor;return"all"===this.done||("done"===this.done?t:"undone"===this.done?!t:void 0)},order:function(e){return"descending"===this.time?e:"ascending"===this.time?K.reverse(e):void 0}}},z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition-group",{class:e.$style["todo-items"],attrs:{tag:"ul",name:"list"}},e._l(e.computedTodos,function(t){return n("TodoItem",e._b({key:t.id,attrs:{onDone:e.onDone,onDelete:e.onDelete,onEdit:e.onEdit}},"TodoItem",t,!1))}))},B=[];function V(e){this["$style"]=n("6UIl")}var Y=!1,Z=V,ee=null,te=null,ne=Object(a["a"])(U,z,B,Y,Z,ee,te),oe=ne.exports,ie=window,se=ie.R,de={name:"Setting",props:["options"],data:function(){return{open:!1,query:"",done:"all",time:"descending"}},mounted:function(){var e=this;i.$on("OPEN_SETTING",function(){return e.changeOpen(!0)})},methods:{changeOpen:function(e){this.open=e},applySetting:function(){this.changeOpen(!1),i.$emit("APPLY_SETTING",se.pick(["query","done","time"],this))}}},re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.open?n("div",{class:e.$style.root,on:{click:function(t){if(t.target!==t.currentTarget)return null;e.changeOpen(!1)}}},[n("div",{class:e.$style.panel},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],class:e.$style.search,attrs:{type:"text",placeholder:"search in titles"},domProps:{value:e.query},on:{input:function(t){t.target.composing||(e.query=t.target.value)}}}),n("div",{class:e.$style["radio-title"]},[e._v("filter based on done")]),n("div",{class:e.$style["radio-root"]},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.done,expression:"done"}],attrs:{type:"radio",value:"all"},domProps:{checked:e._q(e.done,"all")},on:{change:function(t){e.done="all"}}}),n("label",{attrs:{for:"one"}},[e._v("all")])]),n("div",{class:e.$style["radio-root"]},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.done,expression:"done"}],attrs:{type:"radio",value:"done"},domProps:{checked:e._q(e.done,"done")},on:{change:function(t){e.done="done"}}}),n("label",{attrs:{for:"two"}},[e._v("done")])]),n("div",{class:e.$style["radio-root"]},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.done,expression:"done"}],attrs:{type:"radio",value:"undone"},domProps:{checked:e._q(e.done,"undone")},on:{change:function(t){e.done="undone"}}}),n("label",{attrs:{for:"two"}},[e._v("undone")])]),n("div",{class:e.$style["radio-title"]},[e._v("filter based on time")]),n("div",{class:e.$style["radio-root"]},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.time,expression:"time"}],attrs:{type:"radio",value:"ascending"},domProps:{checked:e._q(e.time,"ascending")},on:{change:function(t){e.time="ascending"}}}),n("label",{attrs:{for:"one"}},[e._v("ascending")])]),n("div",{class:e.$style["radio-root"]},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.time,expression:"time"}],attrs:{type:"radio",value:"descending"},domProps:{checked:e._q(e.time,"descending")},on:{change:function(t){e.time="descending"}}}),n("label",{attrs:{for:"two"}},[e._v("descending")])]),n("button",{class:e.$style.apply,on:{click:e.applySetting}},[e._v("\n      Apply\n    ")])])]):e._e()},ae=[];function le(e){this["$style"]=n("MxOl")}var ce=!1,ue=le,_e=null,pe=null,me=Object(a["a"])(de,re,ae,ce,ue,_e,pe),fe=me.exports,he=window,ve=he.W,ye=function(){return Math.floor(1e15*Math.random())},xe=function(e){return ve.share.dispatch([],e,[])},Te=function(e){return xe(["__append",[{id:ye(),title:e,functor:""}]])},$e=function(e,t){return xe(["__map",[["__ifElse",[["__propEq",["id",e]],["__assoc",["title",t]],["__identity",[]]]]]])},ge=function(e,t){return xe(["__map",[["__ifElse",[["__propEq",["id",e]],["__assoc",["functor",t]],["__identity",[]]]]]])},ke=function(e){return xe(["__reject",[["__propEq",["id",e]]]])},Ie=window,we=Ie.W,Ee=function(e){we.loadData().then(function(t){var n=t.user.name;e.name=n}),we.share.getFromServer([]).then(function(){return we.start()}),we.share.subscribe(function(t){e.todos=t||[]})},be=window,qe=be.W,Se=be.R,Oe={name:"App",components:{Header:f,TodoInput:w,TodoItems:oe,Setting:fe},data:function(){return{title:"Todolite",name:"",todos:[],editId:""}},created:function(){qe&&Ee(this)},computed:{edit:function(){return Se.find(Se.propEq("id",this.editId),this.todos)}},methods:{onClickEdit:function(e){this.editId=e},onAdd:function(e){Te(e)},onEdit:function(e){$e(e.id,e.title),this.editId=""},onDone:function(e,t){ge(e,t?this.name:"")},onDelete:function(e){ke(e)}}},Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.root},[n("Header",{attrs:{title:e.title}}),n("TodoItems",{attrs:{todos:e.todos,onDone:e.onDone,onDelete:e.onDelete,onEdit:e.onClickEdit}}),n("TodoInput",{attrs:{edit:e.edit},on:{add:e.onAdd,edit:e.onEdit}}),n("Setting")],1)},De=[];function Ce(e){this["$style"]=n("fSpt")}var Ne=!1,je=Ce,Ae=null,He=null,Le=Object(a["a"])(Oe,Pe,De,Ne,je,Ae,He),Me=Le.exports;o["a"].config.productionTip=!1,new o["a"]({render:function(e){return e(Me)}}).$mount("#app")},Pi1K:function(e,t){},XK0h:function(e,t){},dLSf:function(e,t){e.exports={"input-root":"TodoInput_input-root__3wRFE",input:"TodoInput_input__28qMj"}},fSpt:function(e,t){e.exports={root:"App_root__2SJlR"}},oUnx:function(e,t){e.exports={root:"Header_root__k8v1j",title:"Header_title__xw9kv","filter-icon":"Header_filter-icon__3z2vi"}},"s++6":function(e,t){e.exports={checkbox:"Checkbox_checkbox__7A8qm",checked:"Checkbox_checked__3oaPo Checkbox_checkbox__7A8qm"}},w1QW:function(e,t){}},[0]);
//# sourceMappingURL=app.cd4d6bb8.js.map