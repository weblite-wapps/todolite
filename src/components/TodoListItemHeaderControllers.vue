<template>
  <div class="controllers">
    <BaseToggle
      class="toggle done"
      color="#60C102"
      icon="done"
      :value="!!functor"
      @change="changeTodoFunctor({ id, done: $event })"
    />
    <BaseToggle
      v-if="!functor"
      class="toggle star"
      color="#FFAD00"
      icon="star"
      :value="vit"
      @change="changeTodoVit({ id, vit: $event })"
    />
    <BaseToggle
      class="toggle edit"
      color="#636363"
      icon="edit"
      :value="editable"
      @change="toggleEditable"
    />
    <BaseToggle
      class="toggle remove"
      color="#DA4445"
      icon="remove"
      :value="false"
      @change="changeController('remove', $event)"
    />
  </div>
</template>

<script>
// modules
import { mapActions } from 'vuex'
// components
import BaseToggle from '../helper/component/BaseToggle.vue'

export default {
  name: 'TodoListItemControllers',

  components: {
    BaseToggle,
  },

  props: {
    id: { type: Number, require: true },
    functor: { type: String, default: '' },
    vit: { type: Boolean, default: false },
    editable: { type: Boolean, default: false },
    toggleEditable: { type: Function, required: true },
  },

  methods: {
    ...mapActions(['changeTodoFunctor', 'changeTodoVit']),

    changeController(name, value) {
      console.log(name, value)
    },
  },
}
</script>

<style scoped>
.controllers {
  height: 100%;
  display: flex;
}

.controllerButton {
  flex: 1;
}

.toggle {
  margin-top: -40px;
}

.done {
  animation: slide 0.1s ease-in forwards;
}

.star {
  margin-top: -40px;
  animation: slide 0.1s ease-in 0.07s forwards;
}

.edit {
  margin-top: -40px;
  animation: slide 0.1s ease-in 0.14s forwards;
}

.remove {
  margin-top: -40px;
  animation: slide 0.1s ease-in 0.21s forwards;
}

@keyframes slide {
  from {
    margin-top: -40px;
  }
  to {
    margin-top: 0px;
  }
}
</style>
